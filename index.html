<!DOCTYPE html>
<html lang="hy">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wildberries ’ë’∏÷Ç÷Å’°÷É’•’≤’Ø</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        /* Wildberries-’´’∂ ’¥’∏’ø ’£’∏÷Ç’µ’∂’•÷Ä */
        :root {
            --wb-purple: #9b28a4; 
            --wb-light-purple: #c586c5;
            --dark-bg: #111827; /* ‘±’æ’•’¨’´ ’¥’∏÷Ç’£ ’£’∏÷Ç’µ’∂ */
            --dark-secondary-bg: #1f2937; /* ’Ñ’∏÷Ç’£ ’¥’∏’≠÷Ä’°’£’∏÷Ç’µ’∂ */
            --text-color: #f3f4f6; /* ‘≤’°÷Å ’¥’∏’≠÷Ä’°’£’∏÷Ç’µ’∂ ’ø’•÷Ñ’Ω’ø */
            --muted-text: #9ca3af; /* ‘Ω’∏÷Ç’¨ ’ø’•÷Ñ’Ω’ø */
        }

        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--tg-theme-bg-color, var(--dark-bg)); 
            color: var(--tg-theme-text-color, var(--text-color));
            transition: background-color 0.3s, color 0.3s;
        }
        .header {
            background-color: var(--tg-theme-secondary-bg-color, var(--dark-secondary-bg));
            border-bottom: 3px solid var(--wb-purple); 
        }
        .main-button {
            background-color: var(--tg-theme-button-color, var(--wb-purple));
            color: var(--tg-theme-button-text-color, var(--text-color));
            transition: background-color 0.2s, opacity 0.2s;
            text-transform: uppercase;
        }
        .main-button:hover {
            background-color: #8b2593;
        }
        .product-card {
            background-color: var(--tg-theme-secondary-bg-color, var(--dark-secondary-bg));
            border: 1px solid #374151; 
        }
        .skeleton {
            animation: pulse 1.5s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.4; }
        }
        .product-price {
            color: var(--wb-light-purple); 
        }
        #image-modal button {
             color: white;
             text-shadow: 0 0 5px black;
        }
        .request-section {
            background-color: #1f2937;
            border-top: 1px solid #374151;
        }
        .request-section input {
            background-color: #374151;
            border: 1px solid #4b5563;
            color: #f3f4f6;
        }
    </style>
</head>
<body>
    
    <div id="app" class="min-h-screen flex flex-col">
        
        <div class="header shadow-lg p-4 sticky top-0 z-10 flex justify-between items-center rounded-b-xl">
            <h1 class="text-xl font-bold">Wildberries ’ë’∏÷Ç÷Å’°÷É’•’≤’Ø <span class="text-xl" style="color: var(--wb-purple);">üíú</span></h1>
            <div id="user-info" class="text-sm text-gray-400"></div>
        </div>

        <main class="flex-grow p-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4" id="products-container">
            
            <div id="loading-skeleton" class="col-span-2 md:col-span-3 lg:col-span-4 grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div class="product-card shadow-lg p-3 rounded-xl skeleton h-64 bg-gray-700"></div>
                <div class="product-card shadow-lg p-3 rounded-xl skeleton h-64 bg-gray-700"></div>
                <div class="product-card shadow-lg p-3 rounded-xl skeleton h-64 bg-gray-700"></div>
                <div class="product-card shadow-lg p-3 rounded-xl skeleton h-64 hidden md:block bg-gray-700"></div>
            </div>

        </main>
        
        <div class="p-4 request-section shadow-inner mt-4 rounded-t-xl">
            <h3 class="text-lg font-bold mb-3 text-white">ü§î ’â’•’û÷Ñ ’£’ø’∂’∏÷Ç’¥ ’Å’•÷Ä ’∏÷Ç’¶’°’Æ ’°’∫÷Ä’°’∂÷Ñ’®</h3>
            <p class="text-sm text-gray-400 mb-3">’à÷Ç’≤’°÷Ä’Ø’•÷Ñ ’¥’•’¶ ’°’∫÷Ä’°’∂÷Ñ’´ ’°’∂’∏÷Ç’∂’®, **’°÷Ä’ø’´’Ø’∏÷Ç’¨’®** ’Ø’°’¥ ’∞’≤’∏÷Ç’¥’®÷â</p>
            
            <input type="text" id="request-name" placeholder="‘±’∫÷Ä’°’∂÷Ñ’´ ’°’∂’∏÷Ç’∂/’∂’Ø’°÷Ä’°’£÷Ä’∏÷Ç’©’µ’∏÷Ç’∂" class="w-full p-2 rounded-lg mb-2 text-white placeholder-gray-400">
            <input type="text" id="request-article" placeholder="‘±÷Ä’ø’´’Ø’∏÷Ç’¨ (Wildberries ID, ’®’Ω’ø ÷Å’°’∂’Ø’∏÷Ç’©’µ’°’∂)" class="w-full p-2 rounded-lg mb-2 text-white placeholder-gray-400">
            <input type="url" id="request-link" placeholder="’Ä’≤’∏÷Ç’¥ (Link, ’®’Ω’ø ÷Å’°’∂’Ø’∏÷Ç’©’µ’°’∂)" class="w-full p-2 rounded-lg mb-4 text-white placeholder-gray-400">
            
            <button id="send-request-button" class="main-button w-full px-4 py-3 rounded-full font-semibold shadow-md text-base">
                ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’Ä’°’µ’ø’® üöÄ
            </button>
        </div>

        <div id="image-modal" class="hidden fixed inset-0 bg-black bg-opacity-90 flex items-center justify-center p-4 z-50">
            <div class="relative max-w-xl w-full">
                <button onclick="document.getElementById('image-modal').classList.add('hidden')" 
                        class="absolute -top-8 right-0 text-white text-3xl font-bold p-2 leading-none">
                    &times;
                </button>
                
                <div id="image-gallery-content" class="bg-white p-4 rounded-xl shadow-2xl">
                    <h3 id="gallery-product-name" class="text-lg font-bold mb-3 text-gray-800 border-b pb-2"></h3>
                    <div id="product-images-container" class="grid grid-cols-2 md:grid-cols-3 gap-2 max-h-96 overflow-y-auto">
                        </div>
                </div>
            </div>
        </div>
        
        <div id="message-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50">
            <div class="bg-white p-6 rounded-xl shadow-2xl max-w-sm w-full text-center">
                <p id="modal-text" class="text-gray-800 font-semibold"></p>
                <button onclick="document.getElementById('message-modal').classList.add('hidden')" class="main-button mt-4 px-4 py-2 rounded-full text-sm">’ì’°’Ø’•’¨</button>
            </div>
        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>

    <script>
        // ’Å’•÷Ä ’ø÷Ä’°’¥’°’§÷Ä’°’Æ Firebase-’´ ‘ø’∏’∂÷Ü’´’£’∏÷Ç÷Ä’°÷Å’´’°’∂
        const firebaseConfig = {
            apiKey: "AIzaSyCXp9sfT5rTtKQX95wQi13ZGhfEbqNeMxQ",
            authDomain: "wildberries-shop.firebaseapp.com",
            projectId: "wildberries-shop",
            storageBucket: "wildberries-shop.firebasestorage.app",
            messagingSenderId: "461291386921",
            appId: "1:461291386921:web:970ed17cf9a25893354438",
            measurementId: "G-EYGVT824J5"
        };

        let db;
        let auth;
        let userId = 'anon_user_' + Date.now(); 
        const app_id = firebaseConfig.projectId; 

        const tg = window.Telegram.WebApp;
        tg.ready();
        tg.MainButton.hide();

        const productsContainer = document.getElementById('products-container');
        const loadingSkeleton = document.getElementById('loading-skeleton');
        const userInfoDisplay = document.getElementById('user-info');
        
        function showMessage(text) {
            document.getElementById('modal-text').textContent = text;
            document.getElementById('message-modal').classList.remove('hidden');
        }

        // ----------------------------------------------------
        // 1. FIREBASE ‘ª’Ü‘ª’ë‘ª‘±‘º‘ª‘∂‘±’ë‘ª‘±
        // ----------------------------------------------------
        async function initializeFirebase() {
            try {
                const app = firebase.initializeApp(firebaseConfig);
                db = app.firestore();
                auth = app.auth();

                auth.onAuthStateChanged(user => {
                    if (user) {
                        userId = user.uid;
                    } else {
                        auth.signInAnonymously().then(cred => {
                            userId = cred.user.uid;
                        }).catch(error => {
                            console.error("Anonymous Sign In Error:", error);
                            showMessage("’Ä’∂’°÷Ä’°’æ’∏÷Ä ’π’ß ’¥’∏÷Ç’ø÷Ñ ’£’∏÷Ä’Æ’•’¨÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ÷É’∏÷Ä’±’•’¨ ’∂’∏÷Ä’´÷Å÷â");
                        });
                    }
                });

                const tgUser = tg.initDataUnsafe.user;
                if (tgUser) {
                    const userName = tgUser.first_name || "‘±’∂’°’∂’∏÷Ç’∂";
                    userInfoDisplay.textContent = `‘≤’°÷Ä÷á, ${userName}`;
                }
                
                await fetchProducts();

            } catch (error) {
                console.error("Firebase Initialization Error:", error);
                showMessage(`Firebase-’´ ’´’∂’´÷Å’´’°’¨’´’¶’°÷Å’´’°’µ’´ ’Ω’≠’°’¨÷â ‘ø’∏’§’®: ${error.code}`);
            }
        }

        // ----------------------------------------------------
        // 2. ’è’é’Ö‘±‘º’Ü‘µ’ê‘ª ‘≤‘µ’å’Ü’à’í’Ñ ‘µ’é ’ë’à’í’ë‘±‘¥’ê’à’í’Ñ
        // ----------------------------------------------------

        async function fetchProducts() {
            const path = `artifacts/${app_id}/public/data/products`;
            try {
                loadingSkeleton.classList.remove('hidden');
                
                const productsRef = db.collection(path);
                const snapshot = await productsRef.get();
                
                productsContainer.innerHTML = '';
                
                if (snapshot.empty) {
                    productsContainer.innerHTML = `
                        <div class="col-span-full text-center py-12 text-gray-500">
                            ‘±’∫÷Ä’°’∂÷Ñ’∂’•÷Ä ’π’Ø’°’∂÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’°’æ’•’¨’°÷Å’∂’•’¨ ’¥’∏÷Ñ ’ø’æ’µ’°’¨’∂’•÷Ä Firestore-’∏÷Ç’¥÷â
                            <button id="seed-data" class="main-button mt-4 px-4 py-2 rounded-full text-sm">‘±’æ’•’¨’°÷Å’∂’•’¨ ’ï÷Ä’´’∂’°’Ø’•’¨’´ ‘±’∫÷Ä’°’∂÷Ñ’∂’•÷Ä</button>
                        </div>
                    `;
                    document.getElementById('seed-data').addEventListener('click', seedData);
                    return;
                }
                
                snapshot.forEach(doc => {
                    const product = doc.data();
                    product.id = doc.id;
                    renderProductCard(product);
                });
                
            } catch (error) {
                console.error("Error fetching products:", error);
                productsContainer.innerHTML = `<div class="col-span-full text-center py-12 text-red-500">’ç’≠’°’¨’ù ’°’∫÷Ä’°’∂÷Ñ’∂’•÷Ä’® ’¢’•’º’∂’•’¨’´’Ω: ${error.message}</div>`;
            } finally {
                loadingSkeleton.classList.add('hidden');
            }
        }
        
        // üñºÔ∏è renderProductCard ’ñ’à’í’Ü‘ø’ë‘ª‘±
        function renderProductCard(product) {
            
            const card = document.createElement('div');
            card.className = "product-card shadow-lg p-3 rounded-xl flex flex-col justify-between border-gray-700 hover:shadow-xl";
            
            const mainImageUrl = (product.imageUrls && product.imageUrls.length > 0) ? product.imageUrls[0] : product.imageUrl;
            
            card.innerHTML = `
                <img src="${mainImageUrl || 'https://placehold.co/400x300/e0f2fe/0369a1?text=WB'}" 
                    onerror="this.onerror=null; this.src='https://placehold.co/400x300/e0f2fe/0369a1?text=WB';"
                    alt="${product.name}" 
                    class="w-full h-28 object-cover rounded-lg mb-2 cursor-pointer hover:opacity-80 transition-opacity"
                    data-action="open-gallery"> 
                <h3 class="font-bold text-base mb-1 truncate text-white">${product.name}</h3>
                <p class="text-xs text-muted-text mb-2">${product.description || '’Ä’´’°’∂’°’¨’´ ’°’∫÷Ä’°’∂÷Ñ'}</p>
                <div class="text-xs text-gray-500 mb-1">‘±÷Ä’ø’´’Ø’∏÷Ç’¨: <b class="text-gray-400">${product.article || 'N/A'}</b></div>
                <div class="font-extrabold text-lg product-price mb-3">${(product.price || 0).toFixed(0)} ‘¥’ê</div>

                <button class="main-button w-full px-3 py-2 rounded-full font-semibold shadow-md text-sm"
                            data-product-id="${product.id}" 
                            data-product-name="${product.name}"
                            data-product-article="${product.article || 'N/A'}"
                            data-action="request">
                    ’à÷Ç’≤’°÷Ä’Ø’•’¨ ’Ä’°’µ’ø
                </button>
            `;
            productsContainer.appendChild(card);
            
            card.querySelector('img[data-action="open-gallery"]').addEventListener('click', () => {
                openImageGallery(product); 
            });

            // üöÄ ‘±’Ö’ç’è‘µ’Ç ’ì’à’ì’à‘Ω’é‘±‘æ ‘ø’à‘¥‘∏’ù INLINE ’Ä‘±’Ö’è‘ª ’Ä‘±’Ñ‘±’ê
            card.querySelector('button[data-action="request"]').addEventListener('click', (e) => {
                const { productName, productArticle } = e.currentTarget.dataset;
                
                // ’à÷Ç’≤’°÷Ä’Ø’∏÷Ç’¥ ’ß ’ø’æ’µ’°’¨’∂’•÷Ä’® Telegram ’¢’∏’ø’´’∂
                const notificationText = `PRODUCT_REQUEST_INLINE: ${productName} (‘±÷Ä’ø’´’Ø’∏÷Ç’¨: ${productArticle}) | User ID: ${tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : 'N/A'}`;
                tg.sendData(notificationText);
                
                showMessage(`’Ä’°’µ’ø ${productName} (‘±÷Ä’ø’´’Ø’∏÷Ç’¨: ${productArticle})-’´ ’∞’°’¥’°÷Ä ’∏÷Ç’≤’°÷Ä’Ø’æ’°’Æ ’ß÷â ’Ñ’•’∂÷Ñ ’Ø’Ø’°’∫’æ’•’∂÷Ñ ’Å’•’¶ ’∞’•’ø÷â`);
            });
        }
        
        // ----------------------------------------------------
        // 3. ’Ñ’à’î ’è’é’Ö‘±‘º’Ü‘µ’ê‘ª ‘±’é‘µ‘º‘±’ë’à’í’Ñ (‘ª÷Ä’°’Ø’°’∂ ÷Ü’°’µ’¨’•÷Ä’´ ’°’∂’∏÷Ç’∂’∂’•÷Ä’∏’æ)
        // ----------------------------------------------------
        
        async function seedData() {
             // ’ï’£’ø’°’£’∏÷Ä’Æ’∏÷Ç’¥ ’•’∂÷Ñ ’Å’•÷Ä ’ø÷Ä’°’¥’°’§÷Ä’°’Æ ÷Ü’°’µ’¨’•÷Ä’´ ’°’∂’∏÷Ç’∂’∂’•÷Ä’® ’∏÷Ä’∫’•’Ω ’¥’∏÷Ñ ’∞’≤’∏÷Ç’¥’∂’•÷Ä
            const mockImageLinks = {
                product1: [
                    "19406984980_137110908.jpg", 
                    "19332142653_137110908.jpg",
                    "f0c1595a4dc4420cbe8172daf4cf6911.webp"
                ],
                product2: [
                    "FireStep_produktne_04_3 (1).webp",
                    "19406990831_137110908.jpg",
                    "a3f71a0c-8120-4828-a23d-3689ebb1fd14.jpg"
                ],
                product3: [
                    "19407014682_137110908.jpg",
                    "19407020475_137110908.jpg"
                ]
            };
            
            const mockProducts = [
                { 
                    name: "‘∂’£’•’Ω’ø '‘±’¥’°’º’°’µ’´’∂ ’á’∏÷Ç’∂’π'", 
                    price: 9500, 
                    description: "‘π’•’©÷á, ’¢’°’¥’¢’°’Ø’µ’° ’¶’£’•’Ω’ø’ù ’æ’°’º ’£’∏÷Ç’µ’∂’•÷Ä’∏’æ÷â", 
                    article: "12345678", 
                    imageUrl: mockImageLinks.product1[0], // ’Ä’´’¥’∂’°’Ø’°’∂ ’∂’Ø’°÷Ä
                    imageUrls: mockImageLinks.product1
                },
                { 
                    name: "‘≤’°’≥’Ø’∏’∂ '’î’°’¥’∏÷Ç÷Å ’ä’°’∑’ø’∫’°’∂'", 
                    price: 24500, 
                    description: "‘±’∂’ª÷Ä’°’∂÷Å’´’Ø, ’©’•’©÷á ’Ω’∫’∏÷Ä’ø’°’µ’´’∂ ’¢’°’≥’Ø’∏’∂÷â", 
                    article: "56789012", 
                    imageUrl: mockImageLinks.product2[0],
                    imageUrls: mockImageLinks.product2
                },
                { 
                    name: "‘ø’∏’∑’´’Ø’∂’•÷Ä 'Active Runner'", 
                    price: 18000, 
                    description: "’Ä’°÷Ä’¥’°÷Ä’°’æ’•’ø ’æ’°’¶÷Ñ’´ ’∞’°’¥’°÷Ä, ’°’¥’∏÷Ç÷Ä ’∂’•÷Ä’¢’°’∂’∏’æ÷â", 
                    article: "90123456", 
                    imageUrl: mockImageLinks.product3[0],
                    imageUrls: mockImageLinks.product3
                },
                { 
                    name: "‘±÷Ñ’Ω’•’Ω’∏÷Ç’°÷Ä '’Ñ’•’Æ ‘∂’•’≤’π'", 
                    price: 5500, 
                    description: "’Ñ’°’∂÷Ä ’§’•’ø’°’¨’∂’•÷Ä, ’∏÷Ä’∏’∂÷Ñ ’Ø’¨÷Ä’°÷Å’∂’•’∂ ’Å’•÷Ä ’Ø’•÷Ä’∫’°÷Ä’®÷â", 
                    article: "78901234", 
                    imageUrl: "https://placehold.co/400x300/34d399/047857?text=WB+Accessory",
                    imageUrls: ["https://placehold.co/400x300/34d399/047857?text=WB+Accessory"]
                }
            ];
            
            const path = `artifacts/${app_id}/public/data/products`;
            const batch = db.batch();
            
            try {
                const snapshot = await db.collection(path).get();
                snapshot.docs.forEach(doc => batch.delete(doc.ref));

                mockProducts.forEach((product, index) => {
                    const docRef = db.collection(path).doc(`prod_${index + 1}`);
                    batch.set(docRef, product);
                });
                
                await batch.commit();
                showMessage("’ï÷Ä’´’∂’°’Ø’•’¨’´ ’°’∫÷Ä’°’∂÷Ñ’∂’•÷Ä’∂ ’°’æ’•’¨’°÷Å’æ’•÷Å’´’∂÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’©’°÷Ä’¥’°÷Å’∂’•’¨ ’ß’ª’®÷â");
                fetchProducts(); 
                
            } catch (error) {
                console.error("Error seeding data:", error);
                showMessage(`’ç’≠’°’¨’ù ’ø’æ’µ’°’¨’∂’•÷Ä’∂ ’°’æ’•’¨’°÷Å’∂’•’¨’´’Ω: ${error.message}`);
            }
        }

        // üñºÔ∏è ’Ü‘ø‘±’ê’Ü‘µ’ê‘ª ’ä‘±’è‘ø‘µ’ê‘±’ç’ê‘±’Ä‘ª ’ñ’à’í’Ü‘ø’ë‘ª‘±
        function openImageGallery(product) {
            const galleryModal = document.getElementById('image-modal');
            const imagesContainer = document.getElementById('product-images-container');
            const galleryName = document.getElementById('gallery-product-name');

            const imageUrls = product.imageUrls || (product.imageUrl ? [product.imageUrl] : []);

            if (imageUrls.length === 0) {
                showMessage(`¬´${product.name}¬ª ’°’∫÷Ä’°’∂÷Ñ’´ ’∞’°’¥’°÷Ä ’∂’Ø’°÷Ä’∂’•÷Ä ’π’Ø’°’∂÷â`);
                return;
            }

            imagesContainer.innerHTML = '';
            galleryName.textContent = `’Ü’Ø’°÷Ä’∂’•÷Ä’ù ${product.name} (${imageUrls.length} ’∞’°’ø)`;
            galleryName.classList.add('text-gray-800'); 

            imageUrls.forEach(url => {
                const imgElement = document.createElement('img');
                imgElement.src = url;
                imgElement.alt = product.name;
                
                imgElement.className = "w-full h-auto object-contain rounded-lg shadow-md transition-transform duration-200 hover:scale-[1.02] cursor-zoom-in";
                
                const wrapper = document.createElement('div');
                wrapper.className = "p-1"; 
                wrapper.appendChild(imgElement);

                imagesContainer.appendChild(wrapper);
            });

            galleryModal.classList.remove('hidden');
        }

        // ----------------------------------------------------
        // 4. ‘±’ä’ê‘±’Ü’î‘ª ’Ä‘±’Ö’è‘ª ’à’í’Ç‘±’ê‘ø’à’í’Ñ (’Å÷á’´ ’¥’´’ª’∏÷Å’∏’æ)
        // ----------------------------------------------------

        async function sendProductRequest() {
            const requestName = document.getElementById('request-name').value.trim();
            const requestLink = document.getElementById('request-link').value.trim();
            const requestArticle = document.getElementById('request-article').value.trim();

            if (requestName === '' && requestArticle === '' && requestLink === '') {
                showMessage("‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ’¥’∏÷Ç’ø÷Ñ’°’£÷Ä’•’¨ ’°’º’∂’æ’°’¶’∂ ’°’∫÷Ä’°’∂÷Ñ’´ ’°’∂’∏÷Ç’∂’®, ’°÷Ä’ø’´’Ø’∏÷Ç’¨’® ’Ø’°’¥ ’∞’≤’∏÷Ç’¥’®÷â");
                return;
            }

            const requestData = {
                name: requestName,
                article: requestArticle,
                link: requestLink,
                userId: userId, 
                tgUserId: tg.initDataUnsafe.user ? tg.initDataUnsafe.user.id : 'N/A',
                timestamp: firebase.firestore.FieldValue.serverTimestamp()
            };
            
            const path = `artifacts/${app_id}/requests`; 

            try {
                await db.collection(path).add(requestData);
                
                const linkDisplay = requestLink ? `(’Ä’≤’∏÷Ç’¥: ${requestLink})` : '';
                const articleDisplay = requestArticle ? `(‘±÷Ä’ø’´’Ø’∏÷Ç’¨: ${requestArticle})` : '';
                
                // üöÄ ‘æ‘±’Ü’à’í’ë’à’í’Ñ‘∏ ’Å‘µ’é‘ª ’Ñ‘ª’ã’à’ë’à’é ’à’í’Ç‘±’ê‘ø’é‘±‘æ ’Ä‘±’Ö’è‘ª ’Ä‘±’Ñ‘±’ê
                const notificationText = `PRODUCT_REQUEST_FORM: ${requestName} ${articleDisplay} ${linkDisplay} | User ID: ${requestData.tgUserId}`;
                
                tg.sendData(notificationText);

                showMessage("’á’∂’∏÷Ä’∞’°’Ø’°’¨’∏÷Ç’©’µ’∏÷Ç’∂÷â ’Å’•÷Ä ’∞’°’µ’ø’∂ ’∏÷Ç’≤’°÷Ä’Ø’æ’•’¨ ’ß ’¥’•’¶÷â ’Ñ’•’∂÷Ñ ’∑’∏÷Ç’ø’∏’æ ’Ø’Ø’°’∫’æ’•’∂÷Ñ ’Å’•’¶ ’∞’•’ø÷â");
                
                document.getElementById('request-name').value = '';
                document.getElementById('request-link').value = '';
                document.getElementById('request-article').value = '';
                
                // ‘ø’°÷Ä’∏’≤ ’•÷Ñ ’®’∂’ø÷Ä’•’¨ ÷É’°’Ø’•’¨ WebApp-’® ’∞’°’µ’ø ’∏÷Ç’≤’°÷Ä’Ø’•’¨’∏÷Ç÷Å ’∞’•’ø’∏
                // tg.close(); 

            } catch (error) {
                console.error("Error sending request:", error);
                showMessage(`’ç’≠’°’¨’ù ’∞’°’µ’ø’∂ ’∏÷Ç’≤’°÷Ä’Ø’•’¨’´’Ω÷â ‘Ω’∂’§÷Ä’∏÷Ç’¥ ’•’∂÷Ñ ÷É’∏÷Ä’±’•’¨ ’∂’∏÷Ä’´÷Å÷â`);
            }
        }

        
        document.getElementById('send-request-button').addEventListener('click', sendProductRequest);
        window.onload = initializeFirebase;
    </script>
</body>
</html>
